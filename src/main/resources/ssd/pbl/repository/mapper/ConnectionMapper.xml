<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ssd.pbl.repository.mapper.ConnectionMapper">
	<cache />

	<insert id="insertConnection" parameterType="studentMatchForm">
		INSERT INTO connection (student, teacher, step, subject, studentMatch, registeredAt, updatedAt) 
		VALUES (#{studentId}, #{teacherId},  ‘DEMO’, #{subjectId}, #{studentMathId, javaType=int, jdbcType=NUMERIC}, SYSDATE, SYSDATE)
		<selectKey keyProperty="id" resultType="Integer" order="AFTER">
			SELECT CONNECTION_SEQ.currval FROM dual
		</selectKey>
	</insert>

	<select id="selectConnectionList" parameterType="int" resultType="ConnectionCard">
		SELECT CONNECTION.ID AS connectionId
		FROM CONNECTION
		WHERE CONNECTION.STUDENT = #{sid}
	</select>
</mapper>